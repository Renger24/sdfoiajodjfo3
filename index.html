<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Pepe NFT Baccarat - –ê–≤—Ç–æ–∏–≥—Ä–∞</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Segoe UI', -apple-system, BlinkMacSystemFont, sans-serif;
            background: linear-gradient(135deg, #0c0c0c 0%, #1a1a2e 50%, #16213e 100%);
            color: #ffffff;
            min-height: 100vh;
            line-height: 1.6;
            overflow-x: hidden;
        }

        .container {
            max-width: 100%;
            padding: 15px;
            margin-bottom: 80px;
        }

        /* –•–µ–¥–µ—Ä —Å —Ç–∞–π–º–µ—Ä–æ–º */
        .header {
            text-align: center;
            padding: 20px 0;
            border-bottom: 1px solid rgba(255,255,255,0.1);
            margin-bottom: 20px;
            position: relative;
        }

        .logo {
            font-size: 3rem;
            margin-bottom: 10px;
            animation: float 3s ease-in-out infinite;
        }

        @keyframes float {
            0%, 100% { transform: translateY(0px); }
            50% { transform: translateY(-8px); }
        }

        h1 {
            font-size: 2rem;
            margin-bottom: 8px;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
        }

        /* –¢–∞–π–º–µ—Ä */
        .timer-section {
            background: rgba(255,255,255,0.1);
            border-radius: 20px;
            padding: 15px;
            margin: 15px 0;
            text-align: center;
            border: 2px solid #667eea;
            animation: pulse-border 2s infinite;
        }

        @keyframes pulse-border {
            0%, 100% { border-color: #667eea; }
            50% { border-color: #764ba2; }
        }

        .timer {
            font-size: 2.5rem;
            font-weight: bold;
            color: #43e97b;
            margin: 10px 0;
            text-shadow: 0 0 10px rgba(67, 233, 123, 0.5);
        }

        .timer-label {
            color: #ccc;
            font-size: 1rem;
        }

        /* –ë–∞–ª–∞–Ω—Å */
        .balance-section {
            background: rgba(255,255,255,0.1);
            border-radius: 15px;
            padding: 20px;
            margin: 15px 0;
            text-align: center;
            position: relative;
            overflow: hidden;
        }

        .balance-section::before {
            content: '';
            position: absolute;
            top: 0;
            left: -100%;
            width: 100%;
            height: 100%;
            background: linear-gradient(90deg, transparent, rgba(255,255,255,0.1), transparent);
            animation: shine 3s infinite;
        }

        @keyframes shine {
            0% { left: -100%; }
            100% { left: 100%; }
        }

        .balance-amount {
            font-size: 2.2rem;
            font-weight: bold;
            color: #d4af37;
            margin: 8px 0;
            text-shadow: 0 0 10px rgba(212, 175, 55, 0.3);
        }

        /* NFT –ì–∞–ª–µ—Ä–µ—è - —Ç–æ–ª—å–∫–æ –¥–µ–∫–æ—Ä */
        .nft-gallery {
            display: grid;
            grid-template-columns: repeat(2, 1fr);
            gap: 12px;
            margin: 20px 0;
        }

        .nft-card {
            background: rgba(255,255,255,0.05);
            border-radius: 15px;
            padding: 15px;
            text-align: center;
            border: 1px solid rgba(255,255,255,0.1);
            transition: all 0.3s ease;
            position: relative;
            overflow: hidden;
            cursor: default;
        }

        .nft-card:hover {
            transform: translateY(-3px);
            border-color: #667eea;
        }

        .nft-image {
            width: 100%;
            height: 120px;
            border-radius: 10px;
            margin-bottom: 10px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 3rem;
            background: rgba(0,0,0,0.3);
        }

        .nft-name {
            font-weight: 600;
            margin-bottom: 5px;
            font-size: 0.9rem;
        }

        /* –ò–≥—Ä–æ–≤–æ–π —Å—Ç–æ–ª */
        .game-table {
            background: rgba(0,0,0,0.5);
            border: 2px solid #d4af37;
            border-radius: 15px;
            padding: 20px;
            margin: 20px 0;
            position: relative;
        }

        .cards-container {
            display: flex;
            justify-content: space-around;
            margin: 20px 0;
        }

        .player-area, .banker-area {
            text-align: center;
        }

        .area-title {
            font-size: 1.1rem;
            margin-bottom: 15px;
            color: #d4af37;
        }

        .cards {
            display: flex;
            gap: 8px;
            justify-content: center;
            margin-bottom: 15px;
            min-height: 80px;
        }

        .card {
            width: 50px;
            height: 70px;
            background: white;
            border-radius: 8px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 1.2rem;
            color: black;
            font-weight: bold;
            transition: all 0.3s ease;
            transform-style: preserve-3d;
        }

        .card.flipped {
            transform: rotateY(180deg);
        }

        .card.red {
            color: #d40000;
        }

        /* –û–±–ª–∞—Å—Ç—å —Å—Ç–∞–≤–æ–∫ - –ø–µ—Ä–µ—Ä–∞–±–æ—Ç–∞–Ω–Ω–∞—è */
        .betting-section {
            background: rgba(255,255,255,0.05);
            border-radius: 15px;
            padding: 20px;
            margin: 20px 0;
        }

        .current-bet {
            text-align: center;
            font-size: 1.1rem;
            margin-bottom: 15px;
            color: #d4af37;
        }

        .bet-amount {
            font-size: 1.5rem;
            font-weight: bold;
            color: #43e97b;
            margin: 10px 0;
        }

        .bet-controls {
            display: flex;
            justify-content: center;
            gap: 10px;
            margin: 15px 0;
            flex-wrap: wrap;
        }

        /* –ö—Ä–∞—Å–∏–≤—ã–µ –∫–Ω–æ–ø–∫–∏ —Ñ–∏—à–µ–∫ */
        .chip {
            width: 50px;
            height: 50px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-weight: bold;
            cursor: pointer;
            transition: all 0.3s ease;
            border: 2px solid transparent;
            font-size: 0.9rem;
            position: relative;
            overflow: hidden;
            animation: chip-glow 2s infinite alternate;
        }

        @keyframes chip-glow {
            0% { box-shadow: 0 0 5px rgba(255,255,255,0.3); }
            100% { box-shadow: 0 0 15px rgba(255,255,255,0.6); }
        }

        .chip::before {
            content: '';
            position: absolute;
            top: -50%;
            left: -50%;
            width: 200%;
            height: 200%;
            background: radial-gradient(circle, rgba(255,255,255,0.3) 0%, transparent 70%);
            transform: rotate(45deg);
            transition: all 0.3s ease;
        }

        .chip:hover::before {
            transform: rotate(45deg) translate(10px, 10px);
        }

        .chip.active {
            border-color: #fff;
            box-shadow: 0 0 20px rgba(255,255,255,0.8);
            transform: scale(1.1);
        }

        .chip:active {
            transform: scale(0.95);
        }

        .chip-1 { 
            background: linear-gradient(135deg, #667eea, #764ba2);
            animation-delay: 0s;
        }
        .chip-5 { 
            background: linear-gradient(135deg, #f093fb, #f5576c);
            animation-delay: 0.2s;
        }
        .chip-25 { 
            background: linear-gradient(135deg, #4facfe, #00f2fe);
            animation-delay: 0.4s;
        }
        .chip-100 { 
            background: linear-gradient(135deg, #43e97b, #38f9d7);
            animation-delay: 0.6s;
        }

        /* –ö–Ω–æ–ø–∫–∞ –æ—á–∏—Å—Ç–∫–∏ —Å—Ç–∞–≤–∫–∏ */
        .clear-btn {
            background: linear-gradient(135deg, #ff6b6b, #ee5a24);
            color: white;
            border: none;
            padding: 12px 25px;
            border-radius: 25px;
            font-size: 1rem;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s ease;
            display: block;
            margin: 0 auto;
            width: 200px;
            position: relative;
            overflow: hidden;
        }

        .clear-btn::before {
            content: '';
            position: absolute;
            top: 0;
            left: -100%;
            width: 100%;
            height: 100%;
            background: linear-gradient(90deg, transparent, rgba(255,255,255,0.2), transparent);
            transition: left 0.5s;
        }

        .clear-btn:hover::before {
            left: 100%;
        }

        .clear-btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 5px 15px rgba(255,107,107,0.4);
        }

        /* –ü–∞–∫–µ—Ç—ã Stars - –∫—Ä–∞—Å–∏–≤—ã–µ –∫–Ω–æ–ø–∫–∏ */
        .packages-section {
            margin: 25px 0;
        }

        .packages-title {
            text-align: center;
            font-size: 1.3rem;
            margin-bottom: 20px;
            color: #d4af37;
        }

        .packages-grid {
            display: grid;
            grid-template-columns: repeat(2, 1fr);
            gap: 12px;
        }

        .package-card {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            border-radius: 15px;
            padding: 20px 15px;
            text-align: center;
            cursor: pointer;
            transition: all 0.3s ease;
            border: 2px solid transparent;
            position: relative;
            overflow: hidden;
        }

        .package-card::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: linear-gradient(45deg, transparent 30%, rgba(255,255,255,0.1) 50%, transparent 70%);
            transform: translateX(-100%);
            transition: transform 0.6s;
        }

        .package-card:hover::before {
            transform: translateX(100%);
        }

        .package-card:hover {
            transform: translateY(-5px) scale(1.02);
            border-color: #fff;
            box-shadow: 0 10px 25px rgba(0,0,0,0.3);
        }

        .package-card:active {
            transform: translateY(-2px) scale(1.01);
        }

        .package-emoji {
            font-size: 2.2rem;
            margin-bottom: 10px;
            display: block;
        }

        .package-title {
            font-size: 0.9rem;
            font-weight: 600;
            margin-bottom: 8px;
        }

        .package-price {
            font-size: 1.4rem;
            font-weight: 700;
            margin: 8px 0;
            color: #d4af37;
        }

        /* –ú–æ–±–∏–ª—å–Ω–æ–µ –º–µ–Ω—é */
        .mobile-menu {
            position: fixed;
            bottom: 0;
            left: 0;
            right: 0;
            background: rgba(255,255,255,0.1);
            backdrop-filter: blur(20px);
            display: flex;
            justify-content: space-around;
            padding: 12px 0;
            border-top: 1px solid rgba(255,255,255,0.1);
            z-index: 1000;
        }

        .menu-item {
            text-align: center;
            flex: 1;
            padding: 8px 5px;
            font-size: 0.7rem;
            opacity: 0.7;
            transition: all 0.3s ease;
            cursor: pointer;
        }

        .menu-item.active {
            opacity: 1;
            color: #667eea;
        }

        .menu-icon {
            font-size: 1.2rem;
            margin-bottom: 4px;
            display: block;
        }

        /* –£–≤–µ–¥–æ–º–ª–µ–Ω–∏—è */
        .notification {
            position: fixed;
            top: 20px;
            right: 15px;
            background: linear-gradient(135deg, #4facfe 0%, #00f2fe 100%);
            color: white;
            padding: 15px 20px;
            border-radius: 12px;
            box-shadow: 0 8px 25px rgba(0,0,0,0.3);
            transform: translateX(400px);
            transition: transform 0.3s ease;
            z-index: 1000;
            max-width: 300px;
        }

        .notification.show {
            transform: translateX(0);
        }

        /* –ê–Ω–∏–º–∞—Ü–∏–∏ –¥–ª—è NFT */
        @keyframes bounce {
            0%, 100% { transform: translateY(0); }
            50% { transform: translateY(-10px); }
        }

        @keyframes spin {
            from { transform: rotate(0deg); }
            to { transform: rotate(360deg); }
        }

        @keyframes glow {
            0%, 100% { box-shadow: 0 0 5px rgba(102, 126, 234, 0.5); }
            50% { box-shadow: 0 0 20px rgba(102, 126, 234, 0.8); }
        }

        .animated-nft {
            animation: bounce 3s ease-in-out infinite;
        }

        .spinning-nft {
            animation: spin 6s linear infinite;
        }

        .glowing-nft {
            animation: glow 2s ease-in-out infinite;
        }

        /* –†–µ–∑—É–ª—å—Ç–∞—Ç –∏–≥—Ä—ã */
        .game-result {
            text-align: center;
            font-size: 1.2rem;
            font-weight: bold;
            margin: 15px 0;
            padding: 10px;
            border-radius: 10px;
            background: rgba(255,255,255,0.1);
            animation: result-appear 0.5s ease-out;
        }

        @keyframes result-appear {
            0% { transform: scale(0.8); opacity: 0; }
            100% { transform: scale(1); opacity: 1; }
        }

        .win { color: #43e97b; }
        .lose { color: #ff6b6b; }
        .tie { color: #4facfe; }
    </style>
</head>
<body>
    <div class="container">
        <!-- –•–µ–¥–µ—Ä —Å —Ç–∞–π–º–µ—Ä–æ–º -->
        <div class="header">
            <div class="logo">üê∏</div>
            <h1>Pepe NFT Baccarat</h1>
            <div class="subtitle">–ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è –∏–≥—Ä–∞ ‚Ä¢ –û–Ω–ª–∞–π–Ω ‚Ä¢ –ö–∞–∂–¥—ã–µ 15 —Å–µ–∫</div>
            
            <div class="timer-section">
                <div class="timer-label">–°–ª–µ–¥—É—é—â–∞—è –∏–≥—Ä–∞ —á–µ—Ä–µ–∑:</div>
                <div class="timer" id="timer">15</div>
                <div class="timer-label">—Å–µ–∫—É–Ω–¥</div>
            </div>
        </div>

        <!-- –ë–∞–ª–∞–Ω—Å -->
        <div class="balance-section">
            <div>–í–∞—à –±–∞–ª–∞–Ω—Å</div>
            <div class="balance-amount" id="balance">100</div>
            <div>Stars</div>
        </div>

        <!-- NFT –ì–∞–ª–µ—Ä–µ—è (–¥–µ–∫–æ—Ä) -->
        <h2 style="text-align: center; margin: 20px 0 15px 0;">üé® –ö–æ–ª–ª–µ–∫—Ü–∏—è Pepe NFT</h2>
        <div class="nft-gallery">
            <div class="nft-card">
                <div class="nft-image animated-nft">üê∏</div>
                <div class="nft-name">Pepe Diamond</div>
            </div>
            <div class="nft-card">
                <div class="nft-image spinning-nft">üåü</div>
                <div class="nft-name">Pepe Gold</div>
            </div>
            <div class="nft-card">
                <div class="nft-image glowing-nft">üíé</div>
                <div class="nft-name">Pepe Crystal</div>
            </div>
            <div class="nft-card">
                <div class="nft-image animated-nft">üî•</div>
                <div class="nft-name">Pepe Fire</div>
            </div>
        </div>

        <!-- –ò–≥—Ä–æ–≤–æ–π —Å—Ç–æ–ª -->
        <div class="game-table">
            <div class="cards-container">
                <div class="player-area">
                    <div class="area-title">–ò–≥—Ä–æ–∫ üê∏</div>
                    <div class="cards" id="playerCards"></div>
                    <div class="score" id="playerScore">–û—á–∫–∏: 0</div>
                </div>
                
                <div class="banker-area">
                    <div class="area-title">–ë–∞–Ω–∫–∏—Ä üíé</div>
                    <div class="cards" id="bankerCards"></div>
                    <div class="score" id="bankerScore">–û—á–∫–∏: 0</div>
                </div>
            </div>

            <!-- –†–µ–∑—É–ª—å—Ç–∞—Ç –∏–≥—Ä—ã -->
            <div class="game-result" id="gameResult" style="display: none;"></div>
        </div>

        <!-- –û–±–ª–∞—Å—Ç—å —Å—Ç–∞–≤–æ–∫ -->
        <div class="betting-section">
            <div class="current-bet">–¢–µ–∫—É—â–∞—è —Å—Ç–∞–≤–∫–∞</div>
            <div class="bet-amount" id="currentBetAmount">0</div>
            <div class="current-bet">Stars</div>

            <div class="bet-controls">
                <div class="chip chip-1" data-value="1">1</div>
                <div class="chip chip-5" data-value="5">5</div>
                <div class="chip chip-25" data-value="25">25</div>
                <div class="chip chip-100" data-value="100">100</div>
            </div>

            <button class="clear-btn" id="clearBtn">üóëÔ∏è –û—á–∏—Å—Ç–∏—Ç—å —Å—Ç–∞–≤–∫—É</button>
        </div>

        <!-- –ü–∞–∫–µ—Ç—ã Stars -->
        <div class="packages-section">
            <div class="packages-title">üíé –ü–æ–ø–æ–ª–Ω–µ–Ω–∏–µ Stars</div>
            <div class="packages-grid">
                <div class="package-card" onclick="buyStars(1)">
                    <span class="package-emoji">‚ú®</span>
                    <div class="package-title">–°—Ç–∞—Ä—Ç–æ–≤—ã–π –ø–∞–∫–µ—Ç</div>
                    <div class="package-price">1 Star</div>
                </div>
                
                <div class="package-card" onclick="buyStars(50)">
                    <span class="package-emoji">üéØ</span>
                    <div class="package-title">–ò–≥—Ä–æ–≤–æ–π –Ω–∞–±–æ—Ä</div>
                    <div class="package-price">50 Stars</div>
                </div>
                
                <div class="package-card" onclick="buyStars(100)">
                    <span class="package-emoji">üíé</span>
                    <div class="package-title">–ü—Ä–æ—Ñ–∏ –ø–∞–∫–µ—Ç</div>
                    <div class="package-price">100 Stars</div>
                </div>
                
                <div class="package-card" onclick="buyStars(500)">
                    <span class="package-emoji">üèÜ</span>
                    <div class="package-title">–ü—Ä–µ–º–∏—É–º –ø–∞–∫–µ—Ç</div>
                    <div class="package-price">500 Stars</div>
                </div>
            </div>
        </div>
    </div>

    <!-- –ú–æ–±–∏–ª—å–Ω–æ–µ –º–µ–Ω—é -->
    <nav class="mobile-menu">
        <div class="menu-item active" onclick="switchTab('game')">
            <span class="menu-icon">üé∞</span>
            <div>–ò–≥—Ä–∞</div>
        </div>
        <div class="menu-item" onclick="switchTab('nft')">
            <span class="menu-icon">üê∏</span>
            <div>NFT</div>
        </div>
        <div class="menu-item" onclick="switchTab('shop')">
            <span class="menu-icon">üíé</span>
            <div>–ú–∞–≥–∞–∑–∏–Ω</div>
        </div>
        <div class="menu-item" onclick="switchTab('stats')">
            <span class="menu-icon">üìä</span>
            <div>–°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞</div>
        </div>
    </nav>

    <!-- –£–≤–µ–¥–æ–º–ª–µ–Ω–∏–µ -->
    <div class="notification" id="notification"></div>

    <script>
        // –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è –∏–≥—Ä—ã
        const GAME_INTERVAL = 15000; // 15 —Å–µ–∫—É–Ω–¥
        const BOT_TOKEN = "8176385592:AAHbcdbQhgRrQBeUsgVOCCZ_tGarxfYV7to";

        // –ò–≥—Ä–æ–≤–∞—è –ª–æ–≥–∏–∫–∞
        class BaccaratGame {
            constructor() {
                this.balance = 100;
                this.currentBet = 0;
                this.currentChip = 1;
                this.gameState = 'waiting'; // waiting, dealing, results
                this.timer = 15;
                this.timerInterval = null;
                this.gameInterval = null;
                this.init();
            }

            init() {
                this.setupEventListeners();
                this.updateDisplay();
                this.startGameTimer();
                this.startAutoGame();
            }

            setupEventListeners() {
                // –§–∏—à–∫–∏
                document.querySelectorAll('.chip').forEach(chip => {
                    chip.addEventListener('click', (e) => {
                        e.stopPropagation();
                        this.currentChip = parseInt(chip.dataset.value);
                        document.querySelectorAll('.chip').forEach(c => c.classList.remove('active'));
                        chip.classList.add('active');
                        
                        // –î–æ–±–∞–≤–ª—è–µ–º –∞–Ω–∏–º–∞—Ü–∏—é –Ω–∞–∂–∞—Ç–∏—è
                        chip.style.transform = 'scale(0.9)';
                        setTimeout(() => {
                            chip.style.transform = 'scale(1)';
                        }, 150);
                    });
                });

                // –ö–Ω–æ–ø–∫–∞ –æ—á–∏—Å—Ç–∫–∏ —Å—Ç–∞–≤–∫–∏
                document.getElementById('clearBtn').addEventListener('click', () => {
                    this.clearBet();
                    // –ê–Ω–∏–º–∞—Ü–∏—è –∫–Ω–æ–ø–∫–∏
                    const btn = document.getElementById('clearBtn');
                    btn.style.transform = 'scale(0.95)';
                    setTimeout(() => {
                        btn.style.transform = 'scale(1)';
                    }, 150);
                });

                // –ö–ª–∏–∫ –ø–æ –æ–±–ª–∞—Å—Ç–∏ —Å—Ç–∞–≤–∫–∏ –¥–ª—è –¥–æ–±–∞–≤–ª–µ–Ω–∏—è —Ñ–∏—à–∫–∏
                document.querySelector('.betting-section').addEventListener('click', () => {
                    this.placeBet(this.currentChip);
                });
            }

            placeBet(amount) {
                if (this.gameState !== 'waiting') {
                    this.showNotification('‚è≥ –î–æ–∂–¥–∏—Ç–µ—Å—å –æ–∫–æ–Ω—á–∞–Ω–∏—è –∏–≥—Ä—ã!');
                    return;
                }

                const totalBet = this.currentBet + amount;
                
                if (totalBet > this.balance) {
                    this.showNotification('‚ùå –ù–µ–¥–æ—Å—Ç–∞—Ç–æ—á–Ω–æ Stars!');
                    return;
                }

                this.currentBet += amount;
                this.updateDisplay();
                this.showNotification(`‚úÖ –°—Ç–∞–≤–∫–∞ ${amount} Stars –¥–æ–±–∞–≤–ª–µ–Ω–∞!`);
            }

            clearBet() {
                if (this.gameState !== 'waiting') {
                    this.showNotification('‚è≥ –î–æ–∂–¥–∏—Ç–µ—Å—å –æ–∫–æ–Ω—á–∞–Ω–∏—è –∏–≥—Ä—ã!');
                    return;
                }

                this.currentBet = 0;
                this.updateDisplay();
                this.showNotification('üîÑ –°—Ç–∞–≤–∫–∞ –æ—á–∏—â–µ–Ω–∞!');
            }

            startGameTimer() {
                this.timerInterval = setInterval(() => {
                    this.timer--;
                    document.getElementById('timer').textContent = this.timer;
                    
                    if (this.timer <= 0) {
                        this.timer = 15;
                    }
                }, 1000);
            }

            startAutoGame() {
                this.gameInterval = setInterval(() => {
                    if (this.currentBet > 0) {
                        this.playGame();
                    } else {
                        // –ï—Å–ª–∏ –Ω–µ—Ç —Å—Ç–∞–≤–∫–∏, –ø—Ä–æ—Å—Ç–æ –æ–±–Ω–æ–≤–ª—è–µ–º —Ç–∞–π–º–µ—Ä
                        this.timer = 15;
                        document.getElementById('timer').textContent = this.timer;
                    }
                }, GAME_INTERVAL);
            }

            async playGame() {
                if (this.gameState !== 'waiting') return;
                
                this.gameState = 'dealing';
                this.showNotification('üé≤ –ò–¥–µ—Ç –∏–≥—Ä–∞...');

                // –ê–Ω–∏–º–∞—Ü–∏—è —Ä–∞–∑–¥–∞—á–∏ –∫–∞—Ä—Ç
                await this.animateCardDeal();

                // –†–∞—Å—á–µ—Ç —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–≤
                setTimeout(() => {
                    this.calculateResults();
                    this.gameState = 'waiting';
                    this.timer = 15; // –°–±—Ä–æ—Å —Ç–∞–π–º–µ—Ä–∞
                }, 2000);
            }

            async animateCardDeal() {
                const playerCards = document.getElementById('playerCards');
                const bankerCards = document.getElementById('bankerCards');
                
                playerCards.innerHTML = '';
                bankerCards.innerHTML = '';

                // –ò–º–∏—Ç–∞—Ü–∏—è —Ä–∞–∑–¥–∞—á–∏ –∫–∞—Ä—Ç —Å –∞–Ω–∏–º–∞—Ü–∏–µ–π
                for (let i = 0; i < 2; i++) {
                    await this.addCardWithDelay(playerCards, this.getRandomCard());
                    await this.addCardWithDelay(bankerCards, this.getRandomCard());
                    await this.delay(400);
                }
            }

            async addCardWithDelay(container, card) {
                return new Promise(resolve => {
                    setTimeout(() => {
                        const cardElement = document.createElement('div');
                        cardElement.className = `card ${card.suit === 'hearts' || card.suit === 'diamonds' ? 'red' : ''}`;
                        cardElement.textContent = card.value;
                        cardElement.style.opacity = '0';
                        cardElement.style.transform = 'rotateY(90deg)';
                        container.appendChild(cardElement);
                        
                        // –ê–Ω–∏–º–∞—Ü–∏—è –ø–æ—è–≤–ª–µ–Ω–∏—è –∫–∞—Ä—Ç—ã
                        setTimeout(() => {
                            cardElement.style.opacity = '1';
                            cardElement.style.transform = 'rotateY(0deg)';
                        }, 50);
                        
                        resolve();
                    }, 200);
                });
            }

            delay(ms) {
                return new Promise(resolve => setTimeout(resolve, ms));
            }

            getRandomCard() {
                const values = ['2', '3', '4', '5', '6', '7', '8', '9', '10', 'J', 'Q', 'K', 'A'];
                const suits = ['hearts', 'diamonds', 'clubs', 'spades'];
                return {
                    value: values[Math.floor(Math.random() * values.length)],
                    suit: suits[Math.floor(Math.random() * suits.length)]
                };
            }

            calculateResults() {
                // –í–µ—Ä–æ—è—Ç–Ω–æ—Å—Ç–∏ –¥–ª—è –∫–∞–∑–∏–Ω–æ (–≤ –ø–æ–ª—å–∑—É –¥–æ–º–∞)
                const random = Math.random();
                let winner;
                let winAmount = 0;

                if (random < 0.44) {
                    winner = 'banker';
                    winAmount = this.currentBet * 1.95; // –ö–æ–º–∏—Å—Å–∏—è 5%
                } else if (random < 0.88) {
                    winner = 'player';
                    winAmount = this.currentBet * 2;
                } else {
                    winner = 'tie';
                    winAmount = this.currentBet * 9; // 8:1 + —Å—Ç–∞–≤–∫–∞
                }

                // –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ –±–∞–ª–∞–Ω—Å–∞
                const oldBalance = this.balance;
                this.balance = this.balance - this.currentBet + winAmount;

                // –ü–æ–∫–∞–∑ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–≤
                this.showGameResult(winner, winAmount, oldBalance);

                // –°–±—Ä–æ—Å —Å—Ç–∞–≤–∫–∏ –ø–æ—Å–ª–µ –∏–≥—Ä—ã
                this.currentBet = 0;
                this.updateDisplay();
            }

            showGameResult(winner, winAmount, oldBalance) {
                const resultElement = document.getElementById('gameResult');
                const netWin = winAmount - (this.currentBet || 0);
                
                let resultText = '';
                let resultClass = '';

                if (netWin > 0) {
                    resultText = `üéâ –ü–û–ë–ï–î–ê! +${netWin} Stars`;
                    resultClass = 'win';
                } else if (netWin < 0) {
                    resultText = `üí∏ –ü–†–û–ò–ì–†–´–®: ${Math.abs(netWin)} Stars`;
                    resultClass = 'lose';
                } else {
                    resultText = 'ü§ù –ù–ò–ß–¨–Ø! –°—Ç–∞–≤–∫–∞ –≤–æ–∑–≤—Ä–∞—â–µ–Ω–∞';
                    resultClass = 'tie';
                }

                resultElement.textContent = resultText;
                resultElement.className = `game-result ${resultClass}`;
                resultElement.style.display = 'block';

                // –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ —Å–∫—Ä—ã—Ç–∏–µ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–∞ —á–µ—Ä–µ–∑ 5 —Å–µ–∫—É–Ω–¥
                setTimeout(() => {
                    resultElement.style.display = 'none';
                }, 5000);
            }

            updateDisplay() {
                // –ë–∞–ª–∞–Ω—Å
                document.getElementById('balance').textContent = this.balance;
                
                // –¢–µ–∫—É—â–∞—è —Å—Ç–∞–≤–∫–∞
                document.getElementById('currentBetAmount').textContent = this.currentBet;

                // –ê–∫—Ç–∏–≤–Ω–∞—è —Ñ–∏—à–∫–∞
                document.querySelectorAll('.chip').forEach(chip => {
                    chip.classList.toggle('active', parseInt(chip.dataset.value) === this.currentChip);
                });
            }

            showNotification(message) {
                const notification = document.getElementById('notification');
                notification.textContent = message;
                notification.classList.add('show');
                
                setTimeout(() => {
                    notification.classList.remove('show');
                }, 3000);
            }

            addStars(amount) {
                this.balance += amount;
                this.updateDisplay();
                this.showNotification(`üíé –ë–∞–ª–∞–Ω—Å –ø–æ–ø–æ–ª–Ω–µ–Ω –Ω–∞ ${amount} Stars!`);
            }
        }

        // –§—É–Ω–∫—Ü–∏–∏ –¥–ª—è –º–æ–±–∏–ª—å–Ω–æ–≥–æ –º–µ–Ω—é
        function switchTab(tabName) {
            document.querySelectorAll('.menu-item').forEach(item => {
                item.classList.remove('active');
            });
            event.currentTarget.classList.add('active');
            
            // –ó–¥–µ—Å—å –º–æ–∂–Ω–æ –¥–æ–±–∞–≤–∏—Ç—å –ª–æ–≥–∏–∫—É –ø–µ—Ä–µ–∫–ª—é—á–µ–Ω–∏—è –≤–∫–ª–∞–¥–æ–∫
            game.showNotification(`–ü–µ—Ä–µ–∫–ª—é—á–µ–Ω–æ –Ω–∞: ${tabName}`);
        }

        // –§—É–Ω–∫—Ü–∏—è –¥–ª—è –ø–æ–∫—É–ø–∫–∏ Stars —á–µ—Ä–µ–∑ Telegram –±–æ—Ç–∞
        function buyStars(amount) {
            if (typeof Telegram !== 'undefined' && Telegram.WebApp) {
                // –î–ª—è Telegram Mini App - –æ—Ç–∫—Ä—ã–≤–∞–µ–º –∏–Ω–≤–æ–π—Å
                Telegram.WebApp.openInvoice({
                    product: {
                        id: `stars_${amount}`,
                        title: `–ü–∞–∫–µ—Ç ${amount} Stars`,
                        description: `–ü–æ–ø–æ–ª–Ω–µ–Ω–∏–µ –±–∞–ª–∞–Ω—Å–∞ –Ω–∞ ${amount} Telegram Stars`,
                        prices: [
                            { label: `${amount} Telegram Stars`, amount: amount * 100 }
                        ]
                    },
                    currency: 'XTR'
                }, function(status) {
                    if (status === 'paid') {
                        game.addStars(amount);
                    }
                });
            } else {
                // –î–µ–º–æ-—Ä–µ–∂–∏–º –¥–ª—è –±—Ä–∞—É–∑–µ—Ä–∞
                game.addStars(amount);
                game.showNotification(`üí≥ –î–µ–º–æ-–ø–ª–∞—Ç–µ–∂: ${amount} Stars –¥–æ–±–∞–≤–ª–µ–Ω—ã!`);
                
                // –ê–Ω–∏–º–∞—Ü–∏—è –∫–Ω–æ–ø–∫–∏
                const button = event.currentTarget;
                button.style.transform = 'scale(0.95)';
                setTimeout(() => {
                    button.style.transform = 'scale(1)';
                }, 150);
            }
        }

        // –ó–∞–ø—É—Å–∫ –∏–≥—Ä—ã
        const game = new BaccaratGame();

        // –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å Telegram
        if (typeof Telegram !== 'undefined' && Telegram.WebApp) {
            Telegram.WebApp.ready();
            Telegram.WebApp.expand();
            
            // –ü–æ–ª—É—á–∞–µ–º –¥–∞–Ω–Ω—ã–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
            const user = Telegram.WebApp.initDataUnsafe?.user;
            if (user) {
                game.showNotification(`üëã –î–æ–±—Ä–æ –ø–æ–∂–∞–ª–æ–≤–∞—Ç—å, ${user.first_name || '–∏–≥—Ä–æ–∫'}!`);
            }
        }

        // –ê–∫—Ç–∏–≤–∏—Ä—É–µ–º –ø–µ—Ä–≤—É—é —Ñ–∏—à–∫—É
        document.querySelector('.chip').classList.add('active');
    </script>
</body>
</html>
